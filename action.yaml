name: 'PipeCD Plan Preview'
description: 'Comment PipeCD PlanPreview result on GitHub pull request'
author: 'PipeCD team'

inputs:
  address:
    description: 'The address of PipeCD control-plane.'
    required: true
  api-key:
    description: 'The API key with READ_WRITE role used by pipectl while communicating with PipeCD control-plane.'
    required: true
  token:
    description: 'The GITHUB_TOKEN secret used to send comment on pull request.'
    required: true
  timeout:
    description: 'Maximum amount of time to run. Default is 5m.'
    required: false
    default: 5m
  pull-request-number:
    description: 'PR Number needed for push event'
    required: false

runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - address=${{ inputs.address }}
    - api-key=${{ inputs.api-key }}
    - token=${{ inputs.token }}
    - timeout=${{ inputs.timeout }}
    - pull-request-number=${{ inputs.pull-request-number }}

branding:
  icon: 'eye'
  color: 'green'
